{"version":3,"sources":["components/offer/offer.jsx"],"names":["connect","store","creditData","getCredit","offerData","getOffer","dispatch","setOffer","data","feedbackOpen","setFeedbackOpen","type","credit","contribution","time","maternal","casco","insurance","total","rate","payment","income","getOfferValues","CreditTypes","HOME","getHomeRate","CAR","getCarRate","getRateValue","totalValue","rateValue","paymentValue","incomeValue","useEffect","offerList","value","splittingDigits","name","getComma","getOfferList","className","MinimumCredit","map","item","index","aria-label","onClick"],"mappings":"4HAAA,8DA0HeA,uBAdS,SAACC,GAAD,MAAY,CAClCC,WAAYC,YAAUF,GACtBG,UAAWC,YAASJ,OAGK,SAACK,GAAD,MAAe,CACxCC,SADwC,SAC/BC,GACPF,EAASC,YAASC,KAEpBC,aAJwC,WAKtCH,EAASI,mBAIEV,EAxFD,SAAC,GAAqD,IAApDE,EAAmD,EAAnDA,WAAYE,EAAuC,EAAvCA,UAAWG,EAA4B,EAA5BA,SAAUE,EAAkB,EAAlBA,aACxCE,EAAgET,EAAhES,KAAMC,EAA0DV,EAA1DU,OAAQC,EAAkDX,EAAlDW,aAAcC,EAAoCZ,EAApCY,KAAMC,EAA8Bb,EAA9Ba,SAAUC,EAAoBd,EAApBc,MAAOC,EAAaf,EAAbe,UACnDC,EAAgCd,EAAhCc,MAAOC,EAAyBf,EAAzBe,KAAMC,EAAmBhB,EAAnBgB,QAASC,EAAUjB,EAAViB,OAa7B,EAKIC,YAAeP,EAAUH,EAAQC,EAAcC,EAhB9B,WACnB,OAAQH,GACN,KAAKY,IAAYC,KACf,OAAOC,YAAYZ,EAAcD,GACnC,KAAKW,IAAYG,IACf,OAAOC,YAAWf,EAAQI,EAAOC,GACnC,QACE,OAAO,MAS4CW,IAJvDC,EADF,EACEA,WACAC,EAFF,EAEEA,UACAC,EAHF,EAGEA,aACAC,EAJF,EAIEA,YAGFC,qBAAU,WACR1B,EAAS,CACPW,MAAOW,EACPV,KAAMW,EACNV,QAASW,EACTV,OAAQW,MAET,CAACA,EAAaF,EAAWC,EAAcF,EAAYtB,IAEtD,IAAM2B,EApDa,SAAChB,EAAOP,EAAMQ,EAAMC,EAASC,GAChD,MAAO,CACL,CACEc,MAAM,GAAD,OAAKC,YAAgBlB,GAArB,yCACLmB,KAAK,kCAAD,OAAW1B,IAASY,IAAYC,KAArB,oHAEjB,CACEW,MAAM,GAAD,OAAKG,YAASnB,GAAd,KACLkB,KAAK,qGAEP,CACEF,MAAM,GAAD,OAAKC,YAAgBhB,GAArB,yCACLiB,KAAK,2GAEP,CACEF,MAAM,GAAD,OAAKC,YAAgBf,GAArB,yCACLgB,KAAK,sGAoCSE,CAAarB,EAAOP,EAAMQ,EAAMC,EAASC,GAE3D,OACE,qBAAKmB,UAAU,+BAAf,SAEIX,GAAcY,IAAc9B,GAC1B,qCACE,oBAAI6B,UAAU,eAAd,yGACA,sBAAKA,UAAU,iBAAf,UACE,oBAAIA,UAAU,cAAd,SACGN,EAAUQ,KAAI,SAACC,EAAMC,GAAP,OACb,sBAAKJ,UAAU,cAAf,UACE,oBAAIA,UAAU,eAAd,SAA8BG,EAAKR,QACnC,oBAAIK,UAAU,cAAd,SAA6BG,EAAKN,SAFFM,EAAOC,QAM7C,wBACEJ,UAAU,gBACV7B,KAAK,SACLkC,aAAW,iHACXC,QAAS,kBAAMrC,KAJjB,yGAWJ,qCACE,oBAAI+B,UAAU,qCAAd,kIAGM7B,IAASY,IAAYC,KAArB,8HAHN,6GAIqBY,YAAgBK,IAAc9B,IAJnD,4CAOA,mBAAG6B,UAAU,qBAAb","file":"static/js/13.ca9fae7b.chunk.js","sourcesContent":["import React, {useEffect} from 'react';\nimport {connect} from 'react-redux';\nimport {getCredit, getOffer} from '../../store/selectors';\nimport {setOffer, setFeedbackOpen} from '../../store/action';\nimport {CreditTypes, MinimumCredit} from '../../const';\nimport {\n  splittingDigits,\n  getComma,\n  getCarRate,\n  getHomeRate,\n  getOfferValues\n} from '../../utils';\n\nconst getOfferList = (total, type, rate, payment, income) => {\n  return [\n    {\n      value: `${splittingDigits(total)} рублей`,\n      name: `Сумма ${type === CreditTypes.HOME ? `ипотеки` : `автокредита`}`,\n    },\n    {\n      value: `${getComma(rate)}%`,\n      name: `Процентная ставка`,\n    },\n    {\n      value: `${splittingDigits(payment)} рублей`,\n      name: `Ежемесячный платеж`,\n    },\n    {\n      value: `${splittingDigits(income)} рублей`,\n      name: `Необходимый доход`,\n    },\n  ];\n};\n\nconst Offer = ({creditData, offerData, setOffer, feedbackOpen}) => {\n  const {type, credit, contribution, time, maternal, casco, insurance} = creditData;\n  const {total, rate, payment, income} = offerData;\n\n  const getRateValue = () => {\n    switch (type) {\n      case CreditTypes.HOME:\n        return getHomeRate(contribution, credit);\n      case CreditTypes.CAR:\n        return getCarRate(credit, casco, insurance);\n      default:\n        return null;\n    }\n  };\n\n  const {\n    totalValue,\n    rateValue,\n    paymentValue,\n    incomeValue\n  } = getOfferValues(maternal, credit, contribution, time, getRateValue());\n\n  useEffect(() => {\n    setOffer({\n      total: totalValue,\n      rate: rateValue,\n      payment: paymentValue,\n      income: incomeValue,\n    });\n  }, [incomeValue, rateValue, paymentValue, totalValue, setOffer]);\n\n  const offerList = getOfferList(total, type, rate, payment, income);\n\n  return (\n    <div className=\"form-calculator__offer offer\">\n      {\n        totalValue >= MinimumCredit[type] ?\n          <>\n            <h3 className=\"offer__title\">Наше предложение</h3>\n            <div className=\"offer__wrapper\">\n              <dl className=\"offer__list\">\n                {offerList.map((item, index) => (\n                  <div className=\"offer__item\" key={item + index}>\n                    <dt className=\"offer__value\">{item.value}</dt>\n                    <dd className=\"offer__name\">{item.name}</dd>\n                  </div>\n                ))}\n              </dl>\n              <button\n                className=\"offer__button\"\n                type=\"button\"\n                aria-label=\"Открыть форму заявки\"\n                onClick={() => feedbackOpen()}\n              >\n                Оформить заявку\n              </button>\n            </div>\n          </>\n          :\n          <>\n            <h3 className=\"offer__title offer__title--failure\">\n              {\n                `Наш банк не выдаёт\n                ${type === CreditTypes.HOME ? `ипотечные` : `автокредиты`}\n                кредиты меньше ${splittingDigits(MinimumCredit[type])} рублей.`\n              }\n            </h3>\n            <p className=\"offer__description\">Попробуйте использовать другие параметры для расчёта.</p>\n          </>\n      }\n    </div>\n  );\n}\n\nconst mapStateToProps = (store) => ({\n  creditData: getCredit(store),\n  offerData: getOffer(store),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  setOffer(data) {\n    dispatch(setOffer(data));\n  },\n  feedbackOpen() {\n    dispatch(setFeedbackOpen());\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Offer);\n"],"sourceRoot":""}