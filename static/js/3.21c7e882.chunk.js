(this["webpackJsonpavto-moto"]=this["webpackJsonpavto-moto"]||[]).push([[3],{40:function(e,t,r){"use strict";r.r(t);var n=r(4);var a,c=r(14),i=r(6),o=r(0),l=r(5);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function m(e,t){var r=e.title,n=e.titleId,c=u(e,["title","titleId"]);return o.createElement("svg",s({width:15,height:16,viewBox:"0 0 15 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},c),r?o.createElement("title",{id:n},r):null,a||(a=o.createElement("path",{d:"M13.6399 15.0096L7.50482 8.86495L1.36977 15.0096L0 13.6399L6.14469 7.50482L0 1.36978L1.36977 0L7.50482 6.14469L13.6399 0.00964652L15 1.36978L8.86495 7.50482L15 13.6399L13.6399 15.0096Z",fill:"#9F9E9E"})))}var p=o.forwardRef(m),b=(r.p,r(20)),f=r(10),j=r(21),d=r(2),O=r(3),_=r(1);t.default=Object(l.b)((function(e){return{popupData:Object(f.a)(e),requiredInput:Object(f.c)(e)}}),(function(e){return{setReview:function(t){e(Object(j.f)(t))},closePopup:function(){e(Object(j.b)())},setPopupData:function(t){e(Object(j.c)(t))},clearPopupData:function(){e(Object(j.a)())},setRequiredInput:function(t){e(Object(j.e)(t))}}}))((function(e){var t=e.popupData,r=e.requiredInput,a=e.closePopup,l=e.setReview,s=e.setPopupData,u=e.clearPopupData,m=e.setRequiredInput,f=Object(o.useState)(!1),j=Object(i.a)(f,2),h=j[0],v=j[1],x=Object(o.useRef)(null);Object(o.useEffect)((function(){x.current.focus()}),[]);var g=Object(o.useCallback)((function(e){var n=e.name,a=e.value;s(Object(O.a)(t,Object(c.a)({},n,a))),n in r&&m(Object(O.a)(r,Object(c.a)({},n,Boolean(a))))}),[t,r,m,s]),w=Object(o.useCallback)((function(e){e.preventDefault();var c=t.user,i=t.rating,o={user:c,definition:function(e,t){if(null==e)return{};var r,a,c=Object(n.a)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}(t,["user","rating"]),rating:i,time:String(new Date)};r.user&&r.comment?(v(!1),l(o),u(),a()):v(!0)}),[t,u,r.user,r.comment,l,a]);return function(e){var t=Object(o.useCallback)((function(t){t.key!==d.h.ESCAPE&&t.key!==d.h.ESC||e()}),[e]);Object(o.useEffect)((function(){return document.addEventListener("keydown",t),function(){return document.removeEventListener("keydown",t)}}),[t])}(a),Object(_.jsx)("div",{className:"review-popup",onClick:function(e){e.target===e.currentTarget&&a()},children:Object(_.jsxs)("div",{className:"review-popup__wrapper",children:[Object(_.jsx)("h2",{className:"review-popup__title",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432"}),Object(_.jsx)("button",{className:"review-popup__button-close",type:"button",onClick:a,children:Object(_.jsx)(p,{className:"review-popup__button-icon"})}),Object(_.jsxs)("form",{className:"review-popup__form form ".concat(h?"form--error":""),action:"#",onSubmit:w,children:[Object(_.jsxs)("div",{className:"form__wrapper",children:[Object(_.jsx)("ul",{className:"form__list",children:d.j.map((function(e,n){var a=e.id in r&&!r[e.id];return Object(_.jsxs)("li",{className:"form__item ".concat(a?"form__item--required":""),children:[Object(_.jsx)("label",{className:"form__label visually-hidden",htmlFor:e.id,children:e.title}),Object(_.jsx)("input",{ref:"user"===e.id?x:null,className:"form__input ".concat(a?"form__input--required":""),type:"text",id:e.id,name:e.id,value:t[e.id],placeholder:e.title,onChange:function(e){return g(e.target)}})]},n+e)}))}),Object(_.jsxs)("ul",{className:"form__list",children:[Object(_.jsx)("li",{className:"form__item",children:Object(_.jsx)("fieldset",{className:"form__fieldset",children:Object(_.jsxs)("div",{className:"form__rating-wrapper",children:[Object(_.jsx)("legend",{className:"form__legend",children:"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440:"}),Object(_.jsx)("div",{className:"form__stars-wrapper",children:d.k.map((function(e,r){return Object(_.jsxs)(o.Fragment,{children:[Object(_.jsx)("input",{className:"form__input visually-hidden",type:"radio",id:"star-".concat(e),name:"rating",value:e,checked:t.rating===e,onChange:function(e){return g(e.target)}}),Object(_.jsx)("label",{className:"form__label form__label--star",htmlFor:"star-".concat(e),children:Object(_.jsx)(b.a,{className:"form__rating-icon",wrapper:"span"})})]},r+e)}))})]})})}),Object(_.jsxs)("li",{className:"form__item ".concat(r.comment?"":"form__item--required"),children:[Object(_.jsx)("label",{className:"form__label visually-hidden",htmlFor:"comment",children:"\u0412\u0432\u043e\u0434 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f"}),Object(_.jsx)("textarea",{className:"form__textarea ".concat(r.comment?"":"form__textarea--required"),name:"comment",id:"comment",value:t.comment,placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:function(e){return g(e.target)}})]})]})]}),Object(_.jsx)("button",{className:"form__button-submit button button--red",type:"submit",children:"\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432"})]})]})})}))}}]);
//# sourceMappingURL=3.21c7e882.chunk.js.map